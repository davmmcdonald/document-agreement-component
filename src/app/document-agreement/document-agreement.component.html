<div class="container">
    <h1>Legal Document Review</h1>
    <p class="instructions">Please review each document and check the box to indicate your agreement. You must agree to
        all documents before continuing.</p>
    <form [formGroup]="agreementForm">
        @for (group of groupedDocuments; track group) {
        <div class="document">
            <div class="details">
                <div>
                    <h2>
                        {{ replaceUnderscores(group.type) | titlecase }}
                        <span class="version">(v{{ group.active.version }})</span>
                    </h2>
                    @if (group.active.changesOnly) {
                    <div class="tag">Changes-Only</div>
                    }
                </div>
                <div class="button-wrapper">
                    @if (group.active.changesOnly) {
                    <button class="button">Download Complete Document</button>
                    }
                    <button class="button" (click)="toggleFullscreen(group)">
                        <i class="fa-solid fa-expand"></i>
                    </button>
                </div>
            </div>
            <div class="render" [class.fullscreen]="group.fullscreen">
                @if (group.fullscreen) {
                <div class="minimize" (click)="toggleFullscreen(group)">
                    <i class="fa-solid fa-xmark"></i>
                </div>
                }
                <iframe src="/assets/agreement-1.pdf" frameborder="0"></iframe>
            </div>
            <label>
                <input type="checkbox" [formControlName]="group.type" class="checkbox">
                I agree to the terms of the complete {{ replaceUnderscores(group.type) | titlecase }}
            </label>
        </div>
        }
        <button class="button primary" (click)="submitForm()">Submit</button>
    </form>
    <div class="error" [class.visible]="error.visible">{{ error.message }}</div>
</div>